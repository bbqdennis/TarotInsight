<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tarot Insight 解牌師</title>
  <link rel="stylesheet" href="modules/css/styles.css" />
  <link rel="stylesheet" href="modules/css/question-page.css" />
  <link rel="stylesheet" href="modules/css/spread-page.css" />
  <link rel="stylesheet" href="modules/css/reading-page.css" />
  <link rel="stylesheet" href="modules/css/report-page.css" />
</head>
<body>
  <header class="app-header">
    <div class="app-header__content">
      <h1>Tarot Insight 解牌師</h1>
      <p>從提問、牌陣推薦、抽牌到解牌報告，一次完成的塔羅占卜體驗。</p>
    </div>
  </header>

  <main class="app-main">
    <div class="mode-toggle">
      <button id="toggle-simple-mode" class="btn ghost" type="button">切換至圖像模式</button>
    </div>
    <section id="question-section" class="panel active">
      <div class="panel__header">
        <h2>提問與牌陣推薦</h2>
        <p>輸入你的問題，我們會為你分析主題並推薦最適合的牌陣。</p>
      </div>
      <div class="panel__body">
        <label for="user-question" class="input-label">你想探索的問題是什麼？</label>
        <textarea id="user-question" class="input-textarea" rows="4" placeholder="範例：我和伴侶未來的發展如何？"></textarea>
        <div class="actions">
          <button id="submit-question" class="btn primary">送出問題</button>
          <button id="skip-question" class="btn ghost">直接選擇牌陣</button>
        </div>
        <div id="analysis-result" class="analysis-result" aria-live="polite"></div>
        <div id="recommended-spreads" class="spread-grid"></div>
      </div>
    </section>

    <section id="spread-section" class="panel">
      <div class="panel__header">
        <h2>牌陣說明與抽牌</h2>
        <p id="selected-spread-caption">請先選擇適合的牌陣。</p>
      </div>
      <div class="panel__body">
        <div id="spread-details" class="spread-details"></div>
        <div class="draw-area">
          <div class="draw-controls">
            <button id="draw-manual" class="btn primary" disabled>抽取下一張牌</button>
            <button id="draw-auto" class="btn">自動抽牌</button>
            <button id="reset-draw" class="btn ghost">重新洗牌</button>
          </div>
          <div class="draw-status"></div>
        </div>
        <div class="panel__footer">
          <button id="to-reading" class="btn success" disabled>前往解牌</button>
          <button class="btn ghost" data-action="back-to-question">返回提問</button>
        </div>
      </div>
    </section>

    <section id="reading-section" class="panel">
      <div class="panel__header">
        <h2>解牌結果</h2>
        <p>依照牌陣位置逐一呈現每張牌的意義與洞察。</p>
      </div>
      <div class="panel__body">
        <div id="reading-overview" class="reading-overview"></div>
        <div id="card-interpretations" class="card-interpretations"></div>
      </div>
      <div class="panel__footer">
        <button id="to-report" class="btn success">生成解牌報告</button>
        <button class="btn ghost" data-action="back-to-draw">返回抽牌</button>
      </div>
    </section>

    <section id="report-section" class="panel">
      <div class="panel__header">
        <h2>解牌報告</h2>
        <p>整理本次占卜的重點，方便儲存、分享或列印。</p>
      </div>
      <div class="panel__body">
        <div id="report-summary" class="report-summary"></div>
        <div class="report-actions">
          <button id="download-report" class="btn primary">下載 PDF</button>
          <button id="copy-report" class="btn">複製報告</button>
          <button id="share-line" class="btn">分享至 LINE</button>
          <button id="share-email" class="btn">分享至 Email</button>
        </div>
      </div>
      <div class="panel__footer">
        <button class="btn ghost" data-action="back-to-reading">返回解牌</button>
        <button class="btn" data-action="start-over">重新提問</button>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    <small>© <span id="current-year"></span> Tarot Insight 解牌師 · 為心之所問提供清晰指引。</small>
  </footer>

  <div id="card-lightbox" class="card-lightbox" aria-hidden="true" hidden>
    <div class="card-lightbox__backdrop" data-lightbox-action="close"></div>
    <figure class="card-lightbox__content">
      <button type="button" class="card-lightbox__close" data-lightbox-action="close" aria-label="關閉卡牌放大視圖">×</button>
      <img id="card-lightbox-image" class="card-lightbox__image card-image" alt="" loading="lazy" />
      <figcaption id="card-lightbox-caption" class="card-lightbox__caption"></figcaption>
    </figure>
  </div>

  <script src="modules/js/app.js"></script>
  <script src="modules/js/report-page.js"></script>
  <script src="modules/js/reading-page.js"></script>
  <script src="modules/js/spread-page.js"></script>
  <script src="modules/js/question-page.js"></script>
</body>
</html>
